<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Happy Birthday</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #93c5fd, #f9a8d4);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      transition: background 1s ease-in-out;
    }

    /* Password Card */
    .card {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      text-align: center;
      width: 320px;
      animation: fadeIn 1s forwards;
    }

    h2 {
      color: #111827;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    input {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 10px;
      outline: none;
    }

    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #2563eb;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #1e40af;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Hidden Happy Birthday part */
    #happy-birthday {
      display: none;
      width: 100%;
      height: 100%;
      color: #fadadd;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      overflow-y: auto;
      padding: 2rem;
      box-sizing: border-box;
    }

    h1 {
      font-family: 'Great Vibes', cursive;
      color: #ff8da1;
      font-size: 3.2rem;
      margin-bottom: 2rem;
      text-align: center;
      line-height: 1.4;
      text-shadow: 1px 1px 3px black;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(11, 80px);
      grid-template-rows: repeat(9, 80px);
      gap: 4px;
      width: max-content;
      margin: 0 auto;
    }

   .grid div {
      width: 80px;
      height: 80px;
    }

    .photo {
      background-size: cover;
      background-position: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      border-radius: 16px;
      width: 120px;
      height: 120px;
    }

    .message p {
      font-family: "å¾®è½¯é›…é»‘", "Microsoft YaHei", sans-serif;
      font-size: 1.2rem;
      text-align: left;
      line-height: 1.6;
      margin-top: 2rem;
    }

    /* Countdown and Fireworks */
    #countdown-screen, #celebration-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #countdown-screen {
      background: black;
      color: white;
      font-size: 6rem;
      font-weight: bold;
    }

    #countdown-text {
      animation: scaleUp 1s ease-in-out infinite;
    }

    @keyframes scaleUp {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.5); opacity: 0; }
    }

    #celebration-screen {
      background: black;
      flex-direction: column;
    }

    .celebration-text {
      position: absolute;
      top: 5%;
      font-size: 4rem;
      color: #ed1c24;
      text-shadow: 2px 2px 5px black;
      font-family: 'Great Vibes', cursive;
    }

    #fireworks-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }

    #play-music {
      margin-bottom: 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>

  <!-- ğŸ”’ Password Page -->
<!-- ===== quiz card (replace old password-page div) ===== -->
<div id="password-page" class="card">
  <img id="quiz-image" src="q1.JPG" alt="Question 1 image" style="width:100%; height:160px; object-fit:cover; border-radius:10px; margin-bottom:12px;">
  <h2 id="quiz-prompt">æ¬¢è¿æ¬¢è¿~ä¸ºäº†ç¡®è®¤å¦³æ˜¯é’±é’±æœ€çˆ±çš„æ¨å´½ è¯·è¾“å…¥ä½ ä»¬ç¬¬ä¸€æ¬¡äº²äº²åœ¨å“ªä¸ªå­¦é™¢é™„è¿‘ğŸ˜˜ (è‹±æ–‡/ä¸­æ–‡éƒ½å¯ä»¥ğŸ’–)</h2>
  <input type="text" id="quiz-input" placeholder="Type your answer here">
  <div style="margin-top:10px;">
    <button id="quiz-submit">Submit</button>
  </div>
  <div id="quiz-feedback" style="margin-top:10px; height:20px; color:#059669;"></div>
</div>


<!-- ğŸ‰ Hidden Happy Birthday Page -->
<div id="happy-birthday">

    <div id="celebration-screen">
        <canvas id="fireworks-canvas"></canvas>
        <h1 class="celebration-text">Happy Birthday!</h1>
        <video id="blessing-video" src="V1.mp4" preload="auto" playsinline style="display:none;"></video>
    </div>

    <div id="main-content" style="display:none;">

        <!-- Autoplaying, looping silent montage -->
        <div id="montage-area" style="text-align:center; margin:0 auto 1.5rem; max-width:1100px;">
            <video id="main-montage"
                src="V2_edited.mp4"
                poster="/mnt/data/1c3dab01-8694-4b72-9267-1bfcf344a7c9.png"
                playsinline autoplay muted loop preload="auto"
                style="width:100%; height:auto; border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,0.25);">
                Your browser does not support HTML5 video.
            </video>
        </div>

        <div class="message">
            <p>
                æˆ‘æœ€çˆ±åªçˆ±çš„é’±é’±å®ï¼š<br><br><br>

                è§ä¿¡å¦‚æ™¤ï¼å’Œé’±é’±å®åˆ†å¼€æ‰ä¸€æœˆæœ‰ä½™ï¼Œå´æ„Ÿè§‰å·²å¦‚éš”ä¸‰ç§‹å•¦ï¼Œä½†æ—¥å­å¹¶ä¸éš¾ç†¬ï¼Œå› ä¸ºæ¯å¤©éƒ½æœ‰å®çš„é™ªä¼´ï¼Œæœ‰å®ç»™æˆ‘åŠ æ²¹æ‰“æ°”ï¼Œä¸€æƒ³åˆ°å®ä¹Ÿåœ¨ä¸ºäº†æˆ‘ä»¬èƒ½æ—©æ—¥ç›¸èšè€ŒåŠªåŠ›ï¼Œæ¯ä¸€å¤©éƒ½æ„Ÿè§‰å……æ»¡äº†åŠ›é‡ã€‚<br><br>

                ä¸çŸ¥é“å®å–œä¸å–œæ¬¢æˆ‘ç»™å®å‡†å¤‡çš„å°æƒŠå–œï¼Ÿå˜¿å˜¿ï¼Œå¦‚æœå–œæ¬¢çš„è¯ä¸€å®šè¦å‘Šè¯‰æˆ‘ï¼Œå¥½å¥½å¤¸å¤¸æˆ‘å“¦ã€‚ç¿»çœ‹ç…§ç‰‡æ—¶ï¼Œè„‘æµ·ä¸­å†ä¸€æ¬¡æ¶Œç°å‡ºè¿‡å»ä¸¤å¹´çš„ç¾å¥½å›å¿†ï¼Œçœ‹åˆ°æˆ‘å’Œå®ç”œç”œäº²å»çš„ç…§ç‰‡ï¼Œçœ‹åˆ°æˆ‘ä»¬ä¸€èµ·çœ‹è¿‡æ— æ¯”ç¾ä¸½çš„é£æ™¯ï¼Œå†ä¸€æ¬¡æ„Ÿå¹è‡ªå·±åº¦è¿‡äº†æˆ‘äººç”Ÿä¸­æ— æ¯”å¹¸ç¦çš„ä¸¤å¹´æ—¶å…‰ï¼Œå’Œå®ç•™ä¸‹çš„æ¯ä¸€æ®µå›å¿†ï¼Œåœ¨ä»»ä½•éš¾è¿‡çš„æ—¶å€™å›æƒ³èµ·æ¥éƒ½æ˜¯æ²»æ„ˆçš„è‰¯è¯ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬bucket listsä¸­å·²ç»å¾ˆå¤šget tickedå•¦ï¼Œä½†æ˜¯è¿˜æœ‰æºæºä¸æ–­çš„ã€æ— ç©·æ— å°½çš„æœ‰è¶£çš„äº‹æƒ…æƒ³å’Œå®åœ¨äººç”Ÿä¸­ä¸€èµ·æ¢ç´¢ï¼ŒæœŸå¾…å’Œå®æœªæ¥çš„adventureï¼<br><br>

                27å²æ­£æ˜¯äººç”Ÿæœ€ç¾å¥½çš„å¹´çºªï¼Œå°‘äº†å¾ˆå¤šå¹¼æ—¶çš„æ‡µæ‡‚æ— çŸ¥ï¼Œåœ¨è¿™æ ·çš„å¹´çºªæˆ‘ä»¬æ›´åŠ æ‡‚å¾—çæƒœï¼ŒåŠªåŠ›ç”Ÿæ´»ï¼Œç›¸ä¿¡åœ¨ä¸ä¹…çš„å°†æ¥æˆ‘çš„ä¼˜ç§€å®ä¼šæ”¶è·æ›´å¤šï¼Œåœ¨äººç”Ÿçš„æ–¹æ–¹é¢é¢ä¸­éƒ½æ‹¥æœ‰å……è¶³çš„åº•æ°”ã€‚éå¸¸è£å¹¸åœ°é™ªä¼´äº†å®ç¬¬ä¸‰ä¸ªç”Ÿæ—¥ï¼Œä»¥åè¿˜è¦ç»™å®åº†ç¥å¤šåˆ°æ•°ä¸å®Œçš„ç”Ÿæ—¥ï¼Œå¸Œæœ›å®å¹¸ç¦çš„æ—…é€”ä¸­éƒ½æœ‰æˆ‘çš„èº«å½±ã€‚<br><br>

                å†ä¸€æ¬¡ç¥æˆ‘æœ€å¯çˆ±çš„é’±é’±å®ç”Ÿæ—¥å¿«ä¹ï¼Œæ°¸è¿œå¿«ä¹ï¼Œå²å²å¹³å®‰ï¼Œå¹´å¹´åº·å¥ã€‚æ°¸è¿œæœŸå¾…æˆ‘ä»¬ä¸€èµ·åˆ›é€ çš„ä¸‹ä¸€æ®µç¾å¥½å›å¿†ã€‚<br><br><br>

                çˆ±ä½ çš„æ¨æ¨å®^3^<br><br>
                2025.10.31
            </p>
        </div>
    </div>

    <!-- background audio + fallback button -->
    <audio id="background-music" src="m1.mp3" preload="auto" loop playsinline></audio>
    <button id="music-fallback" style="display:none; margin-top:10px;">
        ğŸ”Š Tap to Enable Background Music
    </button>
</div>

<script>
/* === quiz configuration ===
   Each item: { img: 'q1.JPG', prompt: 'text', answers: ['accepted','variants'] }
*/
const quiz = [
  {
    img: 'q1.JPG',
    prompt: 'æ¬¢è¿æ¬¢è¿~ä¸ºäº†ç¡®è®¤å¦³æ˜¯é’±é’±æœ€çˆ±çš„æ¨å´½ è¯·è¾“å…¥ä½ ä»¬ç¬¬ä¸€æ¬¡äº²äº²åœ¨å“ªä¸ªå­¦é™¢é™„è¿‘ğŸ˜˜ (è‹±æ–‡/ä¸­æ–‡éƒ½å¯ä»¥ğŸ’–)',
    answers: ['darwin', 'è¾¾å°”æ–‡', 'è¾¾å°”æ–‡å­¦é™¢']
  },
  {
    img: 'q2.JPG',
    prompt: 'æ¨å´½å’Œé’±é’±æœ€è¿‘ä¸€æ¬¡ä¸€èµ·ç§äº†å•¥èœğŸ˜½ (è‹±æ–‡/ä¸­æ–‡éƒ½å¯ä»¥)',
    answers: ['aubergine', 'eggplant', 'èŒ„å­']
  },
  {
    img: 'q3.JPG',
    prompt: 'æˆ‘ä»¬ç¬¬äºŒæ¬¡å‡ºå›½æ—…æ¸¸çš„å›½å®¶ğŸ˜ (è‹±æ–‡/ä¸­æ–‡éƒ½å¯ä»¥)',
    answers: ['sweden', 'ç‘å…¸']
  }
];

// state
let currentQ = 0;
const quizImage = document.getElementById('quiz-image');
const quizPrompt = document.getElementById('quiz-prompt');
const quizInput = document.getElementById('quiz-input');
const quizSubmit = document.getElementById('quiz-submit');
const quizFeedback = document.getElementById('quiz-feedback');

function normalizeAnswer(s) {
  if (!s) return '';
  // convert full-width spaces, collapse spaces, lowercase
  return s.replace(/\u3000/g,' ').replace(/\s+/g,' ').trim().toLowerCase();
}

// show question i
function showQuestion(i) {
  currentQ = i;
  const q = quiz[i];
  quizImage.src = q.img;
  quizPrompt.textContent = q.prompt;
  quizInput.value = '';
  quizFeedback.textContent = '';
  quizInput.focus();
}

// check answer for current question
function checkQuizAnswer() {
  const raw = quizInput.value || '';
  const normalized = normalizeAnswer(raw);
  const accepted = quiz[currentQ].answers.map(a => normalizeAnswer(a));
  const correct = accepted.includes(normalized);

  if (correct) {
    // success feedback
    quizFeedback.style.color = '#059669';
    quizFeedback.textContent = 'Correct! â¤ï¸';
    // small delay to let user see success then move on
    setTimeout(() => {
      if (currentQ < quiz.length - 1) {
        showQuestion(currentQ + 1);
      } else {
        // all done -> reveal happy-birthday and play your V1.mp4 immediately (no countdown)
        document.getElementById('password-page').style.display = 'none';
        document.getElementById('happy-birthday').style.display = 'block';
        document.body.style.background = 'black';

        // === autoplay background music ===
const backgroundMusic = document.getElementById('background-music');
const fallbackBtn = document.getElementById('music-fallback');

if (backgroundMusic) {
  backgroundMusic.play().catch(() => {
    // Autoplay blocked â€” show fallback button
    fallbackBtn.style.display = 'inline-block';

    fallbackBtn.onclick = () => {
      backgroundMusic.play().then(() => {
        fallbackBtn.style.display = 'none';
      });
    };
  });
}

        // show celebration screen and play the video
        const celebrationScreen = document.getElementById('celebration-screen');
        const blessingVideo = document.getElementById('blessing-video');
        if (celebrationScreen) celebrationScreen.style.display = 'flex';
        if (blessingVideo) {
          blessingVideo.style.display = 'block';
          blessingVideo.play().catch(() => {
            alert('Please tap the page to play the video.');
          });
        }

        // start fireworks if function is present
        if (typeof launchFireworks === 'function') {
          launchFireworks();
        }
      }
    }, 600);
  } else {
    // wrong answer (no hints)
    quizFeedback.style.color = '#b91c1c';
    quizFeedback.textContent = 'Not quite â€” try again ğŸ’•';
  }
}

// submit on Enter
quizInput.addEventListener('keyup', (e) => {
  if (e.key === 'Enter') checkQuizAnswer();
});

// attach button
quizSubmit.addEventListener('click', checkQuizAnswer);

// start quiz at question 0 (will show q1)
showQuestion(0);
<script>
// === Birthday / celebration logic (cleaned) ===
const celebrationScreen = document.getElementById('celebration-screen');
const blessingVideo = document.getElementById('blessing-video');
const mainContent = document.getElementById('main-content');
const backgroundMusic = document.getElementById('background-music');
const fallbackBtn = document.getElementById('music-fallback');

// play blessing video (used by quiz completion)
function playBlessing() {
  if (!blessingVideo) return;
  blessingVideo.style.display = 'block';
  blessingVideo.play().catch(() => {
    // user interaction required on some browsers
    console.log('Please tap the page to play the blessing video.');
  });
}

// when blessing finishes, hide celebration and show main content (which includes your looping montage)
if (blessingVideo) {
  blessingVideo.addEventListener('ended', () => {
    if (celebrationScreen) celebrationScreen.style.display = 'none';
    if (mainContent) mainContent.style.display = 'block';
  });
}

// fallback button behaviour for background music (only shown if autoplay blocked)
// fallbackBtn is shown by the quiz-completion code when autopla y fails
if (fallbackBtn && backgroundMusic) {
  fallbackBtn.addEventListener('click', () => {
    backgroundMusic.play().then(() => {
      fallbackBtn.style.display = 'none';
    }).catch(() => {
      console.log('Playback failed after user click.');
    });
  });
}

// fireworks (unchanged)
function launchFireworks() {
  const canvas = document.getElementById('fireworks-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const particles = [];

  function randomColor() {
    return `hsl(${Math.random() * 360}, 100%, 70%)`;
  }

  for (let i = 0; i < 180; i++) {
    particles.push({
      x: canvas.width / 2,
      y: canvas.height / 2 - 240,
      angle: Math.random() * 2 * Math.PI,
      speed: Math.random() * 3 + 2,
      radius: Math.random() * 3 + 2,
      color: randomColor(),
      alpha: 1
    });
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => {
      const dx = Math.cos(p.angle) * p.speed;
      const dy = Math.sin(p.angle) * p.speed;
      p.x += dx;
      p.y += dy;
      p.alpha -= 0.015;
      if (p.alpha < 0) p.alpha = 0;
      const hueMatch = p.color.match(/\d+\.?\d*/);
      const hue = hueMatch ? hueMatch[0] : 0;
      ctx.fillStyle = `hsla(${hue}, 100%, 70%, ${p.alpha})`;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
      ctx.fill();
    });
    if (particles.some(p => p.alpha > 0)) requestAnimationFrame(animate);
  }
  animate();
}
</script>

</body>
</html>