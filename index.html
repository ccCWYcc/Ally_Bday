<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Happy Birthday</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      min-height: 100vh;                         /* allow body to grow beyond viewport */
     font-family: 'Segoe UI', sans-serif;
     background: linear-gradient(135deg, #93c5fd, #f9a8d4);
     display: flex;
     justify-content: center;
     align-items: center;
     overflow: auto;                             /* allow scrolling instead of hiding overflow */
        transition: background 1s ease-in-out;
         -webkit-overflow-scrolling: touch;          /* smoother scroll on iOS */
    }

    /* Password Card */
    .card {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      text-align: center;
      width: 320px;
      animation: fadeIn 1s forwards;
    }

    .quiz-img {
     width: 100%;
     max-height: 260px;
     object-fit: contain;
     border-radius: 10px;
     margin-bottom: 12px;
     background: #00000020;
    }

    h2 {
      color: #111827;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    input {
      padding: 10px;
      width: 80%;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 10px;
      outline: none;
    }

    /* Make the long message paragraph justified, with CJK-friendly justification,
    and center the final short line (emojis) */
    .message p {
     text-align: justify;                 /* justify paragraph */
     text-justify: inter-ideograph;       /* better for Chinese (fallback to inter-word) */
     -webkit-text-align-last: center;     /* center the last line on webkit */
     -moz-text-align-last: center;        /* center the last line on Firefox */
     text-align-last: center;             /* center the last line on other browsers */
     line-height: 1.65;                   /* optional: improve readability */
     hyphens: none;                       /* no hyphenation for Chinese */
    }

    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #2563eb;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #1e40af;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    /* REPLACEMENT: happy-birthday background + improved contrast + text shadow */
/* Hidden Happy Birthday part (replaced) */
#happy-birthday {
     display: none;
     width: 100%;
     min-height: 100vh;              /* ensure it covers full viewport and scroll area */
        color: #fadadd;
     /* overlay gradient + image for better contrast and consistent coverage */
     background:
      linear-gradient(rgba(0,0,0,0.28), rgba(0,0,0,0.18)),
      url('background.jpg') center center / cover no-repeat;
     overflow-y: auto;
     padding: 2rem;
     box-sizing: border-box;
    }

        /* Make headings and the message text stand out over the photo */
     #happy-birthday h1,
        #happy-birthday .message p {
     text-shadow: 0 2px 8px rgba(0,0,0,0.65);
    }

    h1 {
      font-family: 'Great Vibes', cursive;
      color: #ff8da1;
      font-size: 3.2rem;
      margin-bottom: 2rem;
      text-align: center;
      line-height: 1.4;
      text-shadow: 1px 1px 3px black;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(11, 80px);
      grid-template-rows: repeat(9, 80px);
      gap: 4px;
      width: max-content;
      margin: 0 auto;
    }

   .grid div {
      width: 80px;
      height: 80px;
    }

    .photo {
      background-size: cover;
      background-position: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      border-radius: 16px;
      width: 120px;
      height: 120px;
    }

    .message p {
      font-family: "å¾®è½¯é›…é»‘", "Microsoft YaHei", sans-serif;
      font-size: 1.2rem;
      text-align: left;
      line-height: 1.6;
      margin-top: 2rem;
    }

    /* Countdown and Fireworks */
    #countdown-screen, #celebration-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #countdown-screen {
      background: black;
      color: white;
      font-size: 6rem;
      font-weight: bold;
    }

    #countdown-text {
      animation: scaleUp 1s ease-in-out infinite;
    }

    @keyframes scaleUp {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.5); opacity: 0; }
    }

    #celebration-screen {
      background: black;
      flex-direction: column;
    }

    .celebration-text {
      position: absolute;
      top: 5%;
      font-size: 4rem;
      color: #ed1c24;
      text-shadow: 2px 2px 5px black;
      font-family: 'Great Vibes', cursive;
    }

    #fireworks-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }

    #play-music {
      margin-bottom: 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>

  <!-- ğŸ”’ Password Page -->
<!-- ===== quiz card (replace old password-page div) ===== -->
<div id="password-page" class="card">
  <img id="quiz-image" src="q1.JPG" alt="Question 1 image" class="quiz-img">
  <h2 id="quiz-prompt">æ¬¢è¿æ¬¢è¿~ä¸ºäº†ç¡®è®¤å¦³æ˜¯é’±é’±æœ€çˆ±çš„æ¨å´½ è¯·è¾“å…¥ä½ ä»¬ç¬¬ä¸€æ¬¡äº²äº²åœ¨å“ªä¸ªå­¦é™¢é™„è¿‘ğŸ˜˜ (è‹±æ–‡/ä¸­æ–‡éƒ½å¯ä»¥ğŸ’–)</h2>
  <input type="text" id="quiz-input" placeholder="Type your answer here">
  <div style="margin-top:10px;">
    <button id="quiz-submit">Submit</button>
  </div>
  <div id="quiz-feedback" style="margin-top:10px; height:20px; color:#059669;"></div>
</div>


<!-- ğŸ‰ Hidden Happy Birthday Page -->
<div id="happy-birthday">

    <div id="celebration-screen">
        <canvas id="fireworks-canvas"></canvas>
        <video id="blessing-video" src="V1.mp4" preload="auto" playsinline style="display:none;"></video>
    </div>

    <div id="main-content" style="display:none;">

        <!-- Autoplaying, looping silent montage -->
        <div id="montage-area" style="text-align:center; margin:0 auto 1.5rem; max-width:1100px;">
            <video id="main-montage"
                src="V2_edited.mp4"
                playsinline autoplay muted preload="auto"
                style="width:100%; height:auto; border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,0.25);">
                Your browser does not support HTML5 video.
            </video>
        </div>

        <div class="message">
<p>
æˆ‘æœ€äº²çˆ±çš„å°å®è›‹è›‹æ¨æ³¢å´½ ^3^<br><br>

27å²ç”Ÿæ—¥å¿«ä¹!!!ğŸ¾ğŸ‚ğŸ‰âœ¨ğŸ˜˜ è¿™æ˜¯å’Œå®åœ¨ä¸€èµ·ååº†ç¥çš„ç¬¬ä¸‰ä¸ªç”Ÿæ—¥å•¦ï¼Œå¥½å¼€å¿ƒå¥½çæƒœå’Œå®åœ¨ä¸€èµ·ã€‚<br><br>

è™½ç„¶åªæ˜¯ç¦»å¼€å®ä¸ä¹…ï¼Œä½†æ„Ÿè§‰åº¦æ—¥å¦‚å¹´ï¼Œæ¯å¤©éƒ½å¥½æƒ³å®ã€‚è¦æ˜¯ä¹‹å‰ä¸€å¤©ä¸­æœ€æœŸå¾…çš„æ—¶åˆ»æ˜¯å»åˆ°å®å®¶å®å­å¼€é—¨çœ‹åˆ°å®çš„é‚£ä¸€ç¬é—´ï¼Œé‚£ç°åœ¨ä¸€å¤©ä¸­æœ€è¿«ä¸åŠå¾…çš„æ—¶å€™å°±æ˜¯æ¯å¤©å’Œå®è§†é¢‘è§åˆ°æˆ‘å¯çˆ±å®çš„æ—¶å€™äº†ğŸ˜˜ğŸ’–<br><br>

çˆ±å®æƒ³å®è§å®æ˜¯é™ªä¼´æˆ‘åˆ°åŠå¤œå¾ˆè¿Ÿéƒ½ä¸ç¡è§‰çš„åŠ¨åŠ›ï¼Œæ¯ä¸€å¤©éƒ½å¾ˆæœŸå¾…è§åˆ°å®å­~<br><br>

å˜¿å˜¿è¿˜æœ‰å½“ç„¶è¦éå¸¸æ„Ÿè°¢å®å­æœ€è¿‘é‚£ä¹ˆç”¨å¿ƒä¸ºæˆ‘å‡†å¤‡çš„ç”Ÿæ—¥æƒŠå–œï¼Œè¦æ˜¯æ²¡æœ‰å®æ®¿ä¸‹åŸºç¡€ï¼Œæˆ‘éƒ½æ²¡å¯èƒ½æŠŠä»Šå¤©è¿™ä¸ªå‡†å¤‡ç»™å®çš„åšå‡ºæ¥å‘¢ğŸ«£ æ›´ä¸ç”¨è¯´æƒ³åˆ°ç”¨è¿™æ ·çš„ç¥ç¦æ–¹å¼ï¼Œè¶…çº§ä»°æ…•æˆ‘çš„å¯çˆ±ä¼˜ç§€æ¨å´½å¤§ä½¬ğŸ˜ğŸ˜<br><br>

è™½ç„¶æ— æ³•åšå¾—å¾ˆç²¾è‡´ï¼Œä½†æ˜¯å¸Œæœ›å®å­å–œæ¬¢æˆ‘ç»™å®ç”¨å¿ƒå‡†å¤‡çš„å°å°å¿ƒæ„ï¼ŒæœŸå¾…ä¸‹æ¬¡å’Œå®è§é¢æ—¶å†ä¸€èµ·å¥½å¥½åº†ç¥ğŸ’–<br><br>

ç¥ç¦æˆ‘çš„å¯çˆ±å®äººç”Ÿä¸€å¸†é£é¡ºï¼Œå­¦ä¸šé¡ºé¡ºåˆ©åˆ©ï¼Œå½“ç„¶è¿˜æœ‰æ°¸è¿œçˆ±æˆ‘ğŸ˜ğŸ˜˜ğŸ’• å¸Œæœ›æˆ‘ä»¬æ¥ä¸‹æ¥éƒ½ä¸€åˆ‡é¡ºé¡ºåˆ©åˆ©ï¼Œå’Œå®å„¿è¦æ°¸æ°¸è¿œè¿œç”œç”œèœœèœœä¸€ç›´èµ°ä¸‹å»ï¼Œä¸€èµ·æ—…æ¸¸å…¨ä¸–ç•Œæ¯ä¸ªè§’è½ï¼Œä¸€èµ·å†™ä¸‹å¾ˆå¤šå¾ˆå¤šç¾å¥½çš„å›å¿†ã€‚<br><br>

æ„Ÿè°¢å®å­ä¸€ç›´ä»¥æ¥çš„ææºï¼Œåœ¨è¿™é‡è¦çš„æ—¥å­å†æ¬¡ç¥æˆ‘çš„å¯çˆ±æ¨å®ç”Ÿæ—¥å¿«ä¹!!! å¸Œæœ›æˆ‘ä»¬éƒ½å¹³å®‰å¥åº·ï¼Œäººç”Ÿè·¯ä¸Šå¦³æˆ‘äº’ç›¸æ‰¶æŒé™ªä¼´ï¼Œè¦å’Œå®ä¸€èµ·åº†ç¥æ¥ä¸‹æ¥çš„æ¯ä¸€ä¸ªç”Ÿæ—¥ã€‚æ„¿æˆ‘çš„æ¸©æš–éƒ½èƒ½è¿›å…¥å®çš„ç”Ÿå‘½ä¸­ï¼Œä¸€ç›´é™ªä¼´æˆ‘çš„å®~<br><br>

ğŸ’ğŸ’˜ğŸ’–ğŸ’—ğŸ’“ğŸ’ğŸ’•â£ï¸â¤ï¸â€ğŸ”¥<br><br>

çˆ±ä½ çš„é’±é’±å®^3^<br><br>
25.11.2025
</p>
        </div>
    </div>

    <!-- background audio + fallback button -->
    <audio id="background-music" src="m1.mp3" preload="auto" loop playsinline></audio>
    <button id="music-fallback" style="display:none; margin-top:10px;">
        ğŸ”Š Tap to Enable Background Music
    </button>
</div>

<script>
/* === quiz configuration ===
   Each item: { img: 'q1.JPG', prompt: 'text', answers: ['accepted','variants'] }
*/
const quiz = [
  {
    img: 'q1.JPG',
    prompt: 'æ¬¢è¿æ¬¢è¿~ä¸ºäº†ç¡®è®¤å¦³æ˜¯é’±é’±æœ€çˆ±çš„æ¨å´½ è¯·è¾“å…¥ä½ ä»¬ç¬¬ä¸€æ¬¡äº²äº²åœ¨å“ªä¸ªå­¦é™¢é™„è¿‘ğŸ˜˜ (è‹±æ–‡/ä¸­æ–‡éƒ½å¯ä»¥ğŸ’–)',
    answers: ['darwin', 'è¾¾å°”æ–‡', 'è¾¾å°”æ–‡å­¦é™¢']
  },
  {
    img: 'q2.JPG',
    prompt: 'æ¨å´½å’Œé’±é’±æœ€è¿‘ä¸€æ¬¡ä¸€èµ·ç§äº†å•¥èœğŸ˜½',
    answers: ['aubergine', 'eggplant', 'èŒ„å­']
  },
  {
    img: 'q3.JPG',
    prompt: 'æˆ‘ä»¬ç¬¬äºŒæ¬¡å‡ºå›½æ—…æ¸¸çš„å›½å®¶ğŸ˜',
    answers: ['sweden', 'ç‘å…¸']
  }
];

// state
let currentQ = 0;
const quizImage = document.getElementById('quiz-image');
const quizPrompt = document.getElementById('quiz-prompt');
const quizInput = document.getElementById('quiz-input');
const quizSubmit = document.getElementById('quiz-submit');
const quizFeedback = document.getElementById('quiz-feedback');

function normalizeAnswer(s) {
  if (!s) return '';
  // convert full-width spaces, collapse spaces, lowercase
  return s.replace(/\u3000/g,' ').replace(/\s+/g,' ').trim().toLowerCase();
}

// show question i
function showQuestion(i) {
  currentQ = i;
  const q = quiz[i];
  quizImage.src = q.img;
  quizPrompt.textContent = q.prompt;
  quizInput.value = '';
  quizFeedback.textContent = '';
  quizInput.focus();
}

// check answer for current question
function checkQuizAnswer() {
  const raw = quizInput.value || '';
  const normalized = normalizeAnswer(raw);
  const accepted = quiz[currentQ].answers.map(a => normalizeAnswer(a));
  const correct = accepted.includes(normalized);

  if (correct) {
    // success feedback
    quizFeedback.style.color = '#059669';
    quizFeedback.textContent = 'Correct! â¤ï¸';
    // small delay to let user see success then move on
    setTimeout(() => {
      if (currentQ < quiz.length - 1) {
        showQuestion(currentQ + 1);
      } else {
        // all done -> reveal happy-birthday and play your V1.mp4 immediately (no countdown)
        document.getElementById('password-page').style.display = 'none';
        document.getElementById('happy-birthday').style.display = 'block';
        document.body.style.background = 'black';

        // show celebration screen and play the video
        const celebrationScreen = document.getElementById('celebration-screen');
        const blessingVideo = document.getElementById('blessing-video');
        if (celebrationScreen) celebrationScreen.style.display = 'flex';
        if (blessingVideo) {
          blessingVideo.style.display = 'block';
          blessingVideo.play().catch(() => {
            alert('Please tap the page to play the video.');
          });
        }

        // start fireworks if function is present
        if (typeof launchFireworks === 'function') {
          launchFireworks();
        }
      }
    }, 600);
  } else {
    // wrong answer (no hints)
    quizFeedback.style.color = '#b91c1c';
    quizFeedback.textContent = 'Not quite â€” try again ğŸ’•';
  }
}

// submit on Enter
quizInput.addEventListener('keyup', (e) => {
  if (e.key === 'Enter') checkQuizAnswer();
});

// attach button
quizSubmit.addEventListener('click', checkQuizAnswer);

// start quiz at question 0 (will show q1)
showQuestion(0);
</script>

<script>
// === Birthday / celebration logic (cleaned) ===
const celebrationScreen = document.getElementById('celebration-screen');
const blessingVideo = document.getElementById('blessing-video');
const mainContent = document.getElementById('main-content');
const backgroundMusic = document.getElementById('background-music');
const fallbackBtn = document.getElementById('music-fallback');

// play blessing video (used by quiz completion)
function playBlessing() {
  if (!blessingVideo) return;
  blessingVideo.style.display = 'block';
  blessingVideo.play().catch(() => {
    // user interaction required on some browsers
    console.log('Please tap the page to play the blessing video.');
  });
}

// when blessing finishes, hide celebration, show main content, THEN start music
if (blessingVideo) {
  blessingVideo.addEventListener('ended', () => {
    if (celebrationScreen) celebrationScreen.style.display = 'none';
    if (mainContent) mainContent.style.display = 'block';

    // start background music AFTER blessing video ends
    if (backgroundMusic) {
      backgroundMusic.currentTime = 0;
      backgroundMusic.play().catch(() => {
        // autoplay blocked â€” show fallback button
        if (fallbackBtn) fallbackBtn.style.display = 'inline-block';
      });
    }
  });
}

// fallback button behaviour for background music (only shown if autoplay blocked)
// fallbackBtn is shown by the quiz-completion code when autopla y fails
if (fallbackBtn && backgroundMusic) {
  fallbackBtn.addEventListener('click', () => {
    backgroundMusic.play().then(() => {
      fallbackBtn.style.display = 'none';
    }).catch(() => {
      console.log('Playback failed after user click.');
    });
  });
}

// fireworks (unchanged)
function launchFireworks() {
  const canvas = document.getElementById('fireworks-canvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const particles = [];

  function randomColor() {
    return `hsl(${Math.random() * 360}, 100%, 70%)`;
  }

  for (let i = 0; i < 180; i++) {
    particles.push({
      x: canvas.width / 2,
      y: canvas.height / 2 - 240,
      angle: Math.random() * 2 * Math.PI,
      speed: Math.random() * 3 + 2,
      radius: Math.random() * 3 + 2,
      color: randomColor(),
      alpha: 1
    });
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => {
      const dx = Math.cos(p.angle) * p.speed;
      const dy = Math.sin(p.angle) * p.speed;
      p.x += dx;
      p.y += dy;
      p.alpha -= 0.015;
      if (p.alpha < 0) p.alpha = 0;
      const hueMatch = p.color.match(/\d+\.?\d*/);
      const hue = hueMatch ? hueMatch[0] : 0;
      ctx.fillStyle = `hsla(${hue}, 100%, 70%, ${p.alpha})`;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
      ctx.fill();
    });
    if (particles.some(p => p.alpha > 0)) requestAnimationFrame(animate);
  }
  animate();
}

// === Loop specific part of V2_edited.mp4 (only seconds 8 to 10) ===
const montage = document.getElementById('main-montage');

if (montage) {
  const loopStart = 8;   // where looping begins (seconds)
  const loopEnd = 10;    // where looping ends (seconds)

  montage.addEventListener('loadedmetadata', () => {
    const endTime = Math.min(loopEnd, montage.duration);

    montage.addEventListener('timeupdate', () => {
      if (montage.currentTime >= endTime) {
        montage.currentTime = loopStart;
        montage.play();
      }
    });
  });
}
</script>

</body>
</html>